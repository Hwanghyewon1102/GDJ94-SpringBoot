<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE mapper
    PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
    "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
    
    
    <mapper namespace="com.winter.app.users.UsersDAO">
  

    <insert id="add" parameterType="UsersDTO">
        INSERT INTO users(username, password, name, email, phone, birth) 
        VALUES(#{username}, #{password}, #{name}, #{email}, #{phone}, #{birth});
    </insert>

    <insert id="fileAdd" parameterType="UserFileDTO">
        INSERT INTO profile(file_name, file_origin, username)
        VALUES(#{fileName}, #{fileOrigin}, #{username});
    </insert>

    <resultMap type="UsersDTO" id="userfile">
        <id column="username" property="username" />
        <result column="password" property="password"/>
        <result column="name" property="name"/>
        <result column="email" property="email"/>
        <result column="phone" property="phone"/>
        <result column="birth" property="birth"/>
        <collection property="profile" javaType="java.util.List" ofType="UserFileDTO">
            <id column="file_num" property="fileNum"/>
            <result column="file_name" property="fileName"/>
            <result column="file_origin" property="fileOrigin"/>
        </collection>
    </resultMap>


    
    </mapper>